<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Virtual League Gaming - Accueil</title>
  <!-- Biblioth√®ques externes -->
  <!-- Chart.js pour les graphiques -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Tabletop.js pour lire ta Google Sheet -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tabletop.js/1.5.1/tabletop.min.js"></script>
  <style>
    /* Reset simple */
    * {
      margin: 0; padding: 0; box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background: #0a1e3f;
      color: #e0e7ff;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    header {
      background: linear-gradient(90deg, #004080, #0059b3);
      padding: 1rem 2rem;
      box-shadow: 0 3px 8px rgba(0,0,0,0.6);
      position: sticky;
      top: 0;
      z-index: 10;
    }

    nav {
      display: flex;
      justify-content: center;
      gap: 2rem;
    }

    nav a {
      color: #cce0ff;
      text-decoration: none;
      font-weight: 600;
      font-size: 1.1rem;
      padding: 0.4rem 0.6rem;
      border-radius: 4px;
      transition: background-color 0.3s ease;
    }

    nav a:hover, nav a.active {
      background-color: #1a73e8;
      color: white;
    }

    main {
      flex-grow: 1;
      max-width: 900px;
      margin: 2rem auto;
      padding: 0 1rem;
    }

    h1 {
      margin-bottom: 1rem;
      color: #a9d1ff;
      text-align: center;
      text-shadow: 0 0 5px #58a6ff;
    }

    p {
      font-size: 1.1rem;
      line-height: 1.6;
      text-align: center;
      margin-bottom: 2rem;
      color: #d0d9ff;
    }

    .btn-primary, .button {
      display: block;
      width: max-content;
      margin: 0 auto;
      padding: 0.75rem 1.5rem;
      background-color: #1a73e8;
      color: white;
      font-weight: 700;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      box-shadow: 0 3px 8px rgba(26,115,232,0.7);
      transition: background-color 0.3s ease;
      text-decoration: none;
      text-align: center;
    }

    .btn-primary:hover, .button:hover {
      background-color: #004aad;
    }

    /* Section VLG */
    .vlg-section {
      margin-top: 3rem;
    }

    #playerList li {
      margin-bottom: 0.5rem;
    }

    footer {
      background: #00204d;
      text-align: center;
      padding: 1rem 0;
      color: #8ca0d7;
      font-size: 0.9rem;
      margin-top: auto;
    }

    @media (max-width: 600px) {
      nav {
        flex-direction: column;
        gap: 1rem;
      }
    }
  </style>
</head>
<body>

<header>
  <nav>
    <a href="index.html" class="active">Accueil</a>
    <a href="inscription.html">Inscription</a>
    <a href="equipes.html">√âquipes</a>
    <a href="classement.html">Classement</a>
    <a href="statistiques.html">Statistiques</a>
  </nav>
</header>

<main>
  <h1>Bienvenue sur Virtual League Gaming</h1>
  <p>La ligue virtuelle de NHL 25 en 3 contre 3</p>
  <a href="inscription.html" class="button">Rejoindre la ligue</a>

  <!-- Section stats, formulaire et liste -->
  <div class="vlg-section">

    <!-- Graphique des stats -->
    <h2>üìä Statistiques des joueurs</h2>
    <canvas id="statsChart" width="400" height="200" style="display:block; margin:1rem auto;"></canvas>

    <!-- Formulaire d'inscription automatique -->
    <h2>‚úçÔ∏è Inscription</h2>
    <iframe
      src="https://docs.google.com/forms/d/e/TON_FORM_ID/viewform?embedded=true"
      width="100%" height="600" frameborder="0" marginheight="0" marginwidth="0">
      Chargement‚Ä¶
    </iframe>

    <!-- Liste des joueurs inscrits -->
    <h2>‚úÖ Joueurs d√©j√† inscrits</h2>
    <ul id="playerList" style="list-style: none; padding-left:0; margin-top:1rem;"></ul>

  </div>
</main>

<footer>
  &copy; 2025 Virtual League Gaming - Tous droits r√©serv√©s
</footer>

<!-- Script de chargement des donn√©es -->
<script>
  // Remplace par la cl√© de ta Google Sheet publi√©e
  const SHEET_KEY = 'TA_CLE_DE_SHEET';

  window.onload = () => {
    Tabletop.init({
      key: SHEET_KEY,
      callback: processData,
      simpleSheet: true
    });
  };

  function processData(data) {
    afficheListe(data);
    afficheGraphique(data);
  }

  function afficheListe(data) {
    const ul = document.getElementById('playerList');
    ul.innerHTML = '';
    data.forEach(j => {
      const li = document.createElement('li');
      li.textContent = `${j.Nom} ‚Äì ${j.Points} pts`;
      ul.appendChild(li);
    });
  }

  function afficheGraphique(data) {
    const ctx = document.getElementById('statsChart').getContext('2d');
    new Chart(ctx, {
      type: 'bar',
      data: {
        labels: data.map(j => j.Nom),
        datasets: [{
          label: 'Points',
          data: data.map(j => Number(j.Points))
        }]
      },
      options: { scales: { y: { beginAtZero: true } } }
    });
  }
</script>

</body>
</html>
